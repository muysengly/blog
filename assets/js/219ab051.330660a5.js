"use strict";(self.webpackChunkmy_site=self.webpackChunkmy_site||[]).push([[3766],{868:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>m});const s=JSON.parse('{"id":"Document 001/024","title":"24. Sending Email","description":"Simple Mail...","source":"@site/docs/Document 001/024.md","sourceDirName":"Document 001","slug":"/Document 001/024","permalink":"/blog/docs/Document 001/024","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"24. Sending Email","description":"Simple Mail...","lead":"","date":"2022-01-25T13:41:39.000Z","lastmod":"2022-01-25T13:41:39.000Z","draft":false,"images":[],"type":"docs","toc":true,"weight":24},"sidebar":"sidebar_doc_001","previous":{"title":"23. Network Programming","permalink":"/blog/docs/Document 001/023"},"next":{"title":"25. Multithreaded Programming","permalink":"/blog/docs/Document 001/025"}}');var i=t(4848),a=t(8453);const o={title:"24. Sending Email",description:"Simple Mail...",lead:"",date:new Date("2022-01-25T13:41:39.000Z"),lastmod:new Date("2022-01-25T13:41:39.000Z"),draft:!1,images:[],type:"docs",toc:!0,weight:24},r=void 0,l={},m=[{value:"Example",id:"example",level:2},{value:"Sending an HTML e-mail using Python",id:"sending-an-html-e-mail-using-python",level:2},{value:"Example",id:"example-1",level:3},{value:"Sending Attachments as an E-mail",id:"sending-attachments-as-an-e-mail",level:2},{value:"Example",id:"example-2",level:3}];function d(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Simple Mail Transfer Protocol (SMTP) is a protocol, which handles sending e-mail and routing e-mail between mail servers."}),"\n",(0,i.jsxs)(n.p,{children:["Python provides ",(0,i.jsx)(n.strong,{children:"smtplib"})," module, which defines an SMTP client session object that can be used to send mail to any Internet machine with an SMTP or ESMTP listener daemon."]}),"\n",(0,i.jsx)(n.p,{children:"Here is a simple syntax to create one SMTP object, which can later be used to send an e-mail \u2212"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"import smtplib\n\nsmtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here is the detail of the parameters \u2212"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"host"})," \u2212 This is the host running your SMTP server. You can specify IP address of the host or a domain name like tutorialspoint.com. This is optional argument."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"port"})," \u2212 If you are providing ",(0,i.jsx)(n.em,{children:"host"})," argument, then you need to specify a port, where SMTP server is listening. Usually this port would be 25."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"local_hostname"})," \u2212 If your SMTP server is running on your local machine, then you can specify just ",(0,i.jsx)(n.em,{children:"localhost"})," as of this option."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["An SMTP object has an instance method called ",(0,i.jsx)(n.strong,{children:"sendmail"}),", which is typically used to do the work of mailing a message. It takes three parameters \u2212"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"sender"})," \u2212 A string with the address of the sender."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"receivers"})," \u2212 A list of strings, one for each recipient."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"message"})," \u2212 A message as a string formatted as specified in the various RFCs."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"Here is a simple way to send one e-mail using Python script. Try it once \u2212"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#!/usr/bin/python\n\nimport smtplib\n\nsender = \'from@fromdomain.com\'\nreceivers = [\'to@todomain.com\']\n\nmessage = """From: From Person <from@fromdomain.com>\nTo: To Person <to@todomain.com>\nSubject: SMTP e-mail test\n\nThis is a test e-mail message.\n"""\n\ntry:\n   smtpObj = smtplib.SMTP(\'localhost\')\n   smtpObj.sendmail(sender, receivers, message)         \n   print "Successfully sent email"\nexcept SMTPException:\n   print "Error: unable to send email"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Here, you have placed a basic e-mail in message, using a triple quote, taking care to format the headers correctly. An e-mail requires a ",(0,i.jsx)(n.strong,{children:"From"}),", ",(0,i.jsx)(n.strong,{children:"To"}),", and ",(0,i.jsx)(n.strong,{children:"Subject"})," header, separated from the body of the e-mail with a blank line."]}),"\n",(0,i.jsxs)(n.p,{children:["To send the mail you use ",(0,i.jsx)(n.em,{children:"smtpObj"})," to connect to the SMTP server on the local machine and then use the ",(0,i.jsx)(n.em,{children:"sendmail"})," method along with the message, the from address, and the destination address as parameters (even though the from and to addresses are within the e-mail itself, these aren't always used to route mail)."]}),"\n",(0,i.jsxs)(n.p,{children:["If you are not running an SMTP server on your local machine, you can use ",(0,i.jsx)(n.em,{children:"smtplib"})," client to communicate with a remote SMTP server. Unless you are using a webmail service (such as Hotmail or Yahoo! Mail), your e-mail provider must have provided you with outgoing mail server details that you can supply them, as follows \u2212"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"smtplib.SMTP('mail.your-domain.com', 25)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"sending-an-html-e-mail-using-python",children:"Sending an HTML e-mail using Python"}),"\n",(0,i.jsx)(n.p,{children:"When you send a text message using Python, then all the content are treated as simple text. Even if you include HTML tags in a text message, it is displayed as simple text and HTML tags will not be formatted according to HTML syntax. But Python provides option to send an HTML message as actual HTML message."}),"\n",(0,i.jsx)(n.p,{children:"While sending an e-mail message, you can specify a Mime version, content type and character set to send an HTML e-mail."}),"\n",(0,i.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"Following is the example to send HTML content as an e-mail. Try it once \u2212"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#!/usr/bin/python\n\nimport smtplib\n\nmessage = """From: From Person <from@fromdomain.com>\nTo: To Person <to@todomain.com>\nMIME-Version: 1.0\nContent-type: text/html\nSubject: SMTP HTML e-mail test\n\nThis is an e-mail message to be sent in HTML format\n\n<b>This is HTML message.</b>\n<h1>This is headline.</h1>\n"""\n\ntry:\n   smtpObj = smtplib.SMTP(\'localhost\')\n   smtpObj.sendmail(sender, receivers, message)         \n   print "Successfully sent email"\nexcept SMTPException:\n   print "Error: unable to send email"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"sending-attachments-as-an-e-mail",children:"Sending Attachments as an E-mail"}),"\n",(0,i.jsxs)(n.p,{children:["To send an e-mail with mixed content requires to set ",(0,i.jsx)(n.strong,{children:"Content-type"})," header to ",(0,i.jsx)(n.strong,{children:"multipart/mixed"}),". Then, text and attachment sections can be specified within ",(0,i.jsx)(n.strong,{children:"boundaries"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"A boundary is started with two hyphens followed by a unique number, which cannot appear in the message part of the e-mail. A final boundary denoting the e-mail's final section must also end with two hyphens."}),"\n",(0,i.jsxs)(n.p,{children:["Attached files should be encoded with the ",(0,i.jsx)(n.strong,{children:'pack("m")'})," function to have base64 encoding before transmission."]}),"\n",(0,i.jsx)(n.h3,{id:"example-2",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["Following is the example, which sends a file ",(0,i.jsx)(n.strong,{children:"/tmp/test.txt"})," as an attachment. Try it once \u2212"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#!/usr/bin/python\n\nimport smtplib\nimport base64\n\nfilename = "/tmp/test.txt"\n\n# Read a file and encode it into base64 format\nfo = open(filename, "rb")\nfilecontent = fo.read()\nencodedcontent = base64.b64encode(filecontent)  # base64\n\nsender = \'webmaster@tutorialpoint.com\'\nreciever = \'amrood.admin@gmail.com\'\n\nmarker = "AUNIQUEMARKER"\n\nbody ="""\nThis is a test email to send an attachement.\n"""\n# Define the main headers.\npart1 = """From: From Person <me@fromdomain.net>\nTo: To Person <amrood.admin@gmail.com>\nSubject: Sending Attachement\nMIME-Version: 1.0\nContent-Type: multipart/mixed; boundary=%s\n--%s\n""" % (marker, marker)\n\n# Define the message action\npart2 = """Content-Type: text/plain\nContent-Transfer-Encoding:8bit\n\n%s\n--%s\n""" % (body,marker)\n\n# Define the attachment section\npart3 = """Content-Type: multipart/mixed; name=\\"%s\\"\nContent-Transfer-Encoding:base64\nContent-Disposition: attachment; filename=%s\n\n%s\n--%s--\n""" %(filename, filename, encodedcontent, marker)\nmessage = part1 + part2 + part3\n\ntry:\n   smtpObj = smtplib.SMTP(\'localhost\')\n   smtpObj.sendmail(sender, reciever, message)\n   print "Successfully sent email"\nexcept Exception:\n   print "Error: unable to send email"\n'})})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(6540);const i={},a=s.createContext(i);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);